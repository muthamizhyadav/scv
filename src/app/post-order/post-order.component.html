<div class="main-container">
  <div class="page-title">
    <button class="add-order none">
      <svg
        width="15"
        height="15"
        viewBox="0 0 20 20"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M10 20C4.477 20 0 15.523 0 10C0 4.477 4.477 0 10 0C15.523 0 20 4.477 20 10C20 15.523 15.523 20 10 20ZM9 8.5C9 8.77614 8.77614 9 8.5 9H5.5C5.22386 9 5 9.22386 5 9.5V10.5C5 10.7761 5.22386 11 5.5 11H8.5C8.77614 11 9 11.2239 9 11.5V14.5C9 14.7761 9.22386 15 9.5 15H10.5C10.7761 15 11 14.7761 11 14.5V11.5C11 11.2239 11.2239 11 11.5 11H14.5C14.7761 11 15 10.7761 15 10.5V9.5C15 9.22386 14.7761 9 14.5 9H11.5C11.2239 9 11 8.77614 11 8.5V5.5C11 5.22386 10.7761 5 10.5 5H9.5C9.22386 5 9 5.22386 9 5.5V8.5Z"
          fill="#E5EDF0"
        />
      </svg>
      Add SCV
    </button>

    <div class="title-name">
      <h5>{{cartName}}</h5>
    </div>

    <button class="add-product" (click)="productClick()">
      <svg
        width="15"
        height="15"
        viewBox="0 0 20 20"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M10 20C4.477 20 0 15.523 0 10C0 4.477 4.477 0 10 0C15.523 0 20 4.477 20 10C20 15.523 15.523 20 10 20ZM9 8.5C9 8.77614 8.77614 9 8.5 9H5.5C5.22386 9 5 9.22386 5 9.5V10.5C5 10.7761 5.22386 11 5.5 11H8.5C8.77614 11 9 11.2239 9 11.5V14.5C9 14.7761 9.22386 15 9.5 15H10.5C10.7761 15 11 14.7761 11 14.5V11.5C11 11.2239 11.2239 11 11.5 11H14.5C14.7761 11 15 10.7761 15 10.5V9.5C15 9.22386 14.7761 9 14.5 9H11.5C11.2239 9 11 8.77614 11 8.5V5.5C11 5.22386 10.7761 5 10.5 5H9.5C9.22386 5 9 5.22386 9 5.5V8.5Z"
          fill="#E5EDF0"
        />
      </svg>
      Add Product
    </button>
  </div>

  <div class="table-container">
    <div class="date">
      <button class="prev">
        <svg
          width="22"
          height="24"
          viewBox="0 0 22 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M21 23L9.88889 12L21 1M12.1111 23L1 12L12.1111 1"
            stroke="white"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </button>
      <p>{{ date }}</p>
      <button class="next">
        <svg
          width="22"
          height="24"
          viewBox="0 0 22 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M0.999999 1L12.1111 12L1 23M9.88889 1L21 12L9.88889 23"
            stroke="white"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </button>
    </div>
    <table>
      <tr class="table-header">
        <th>Product</th>
        <th>Raised/Given</th>
        <th>Extra Stock</th>
        <th>Stock Return</th>
        <th>Total Sale</th>
        <th>
          <span>
            <p>Post Order</p>
            <sub> ({{ tomorrow }})</sub>
          </span>
        </th>
      </tr>

      <tr *ngFor="let data of addedProducts">
        <td>{{ data.productTitle }}</td>
        <td>
          <span>
            <p>{{ !data.raised ? 0 : data.raised }} Kg</p>
            /
            <p>{{ !data.given ? 0 : data.given }} Kg</p>
          </span>
        </td>
        <td>{{ !data.extra ? 0 : data.extra }} Kg</td>
        <td>{{ !data.stockreturn ? 0 : data.stockreturn }} Kg</td>
        <td>{{ !data.totalSale ? 0 : data.totalSale }} Kg</td>
        <td class="action">
          <span>
            <button (click)="addProductQty(-1, data)">
              <svg
                width="16"
                height="16"
                viewBox="0 0 16 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M8 16C10.1217 16 12.1566 15.1571 13.6569 13.6569C15.1571 12.1566 16 10.1217 16 8C16 5.87827 15.1571 3.84344 13.6569 2.34315C12.1566 0.842855 10.1217 0 8 0C5.87827 0 3.84344 0.842855 2.34315 2.34315C0.842855 3.84344 0 5.87827 0 8C0 10.1217 0.842855 12.1566 2.34315 13.6569C3.84344 15.1571 5.87827 16 8 16ZM4.75 7.25C4.55109 7.25 4.36032 7.32902 4.21967 7.46967C4.07902 7.61032 4 7.80109 4 8C4 8.19891 4.07902 8.38968 4.21967 8.53033C4.36032 8.67098 4.55109 8.75 4.75 8.75H11.25C11.4489 8.75 11.6397 8.67098 11.7803 8.53033C11.921 8.38968 12 8.19891 12 8C12 7.80109 11.921 7.61032 11.7803 7.46967C11.6397 7.32902 11.4489 7.25 11.25 7.25H4.75Z"
                  fill="white"
                />
              </svg>
            </button>
            <input
              type="text"
              [value]="data.qty == null ? 0 : data.qty"
              (keyup)="qtychange($event, data)"
            />
            <button (click)="addProductQty(1, data)">
              <svg
                width="16"
                height="16"
                viewBox="0 0 16 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M8 16C10.1217 16 12.1566 15.1571 13.6569 13.6569C15.1571 12.1566 16 10.1217 16 8C16 5.87827 15.1571 3.84344 13.6569 2.34315C12.1566 0.842855 10.1217 0 8 0C5.87827 0 3.84344 0.842855 2.34315 2.34315C0.842855 3.84344 0 5.87827 0 8C0 10.1217 0.842855 12.1566 2.34315 13.6569C3.84344 15.1571 5.87827 16 8 16ZM8.75 4.75C8.75 4.55109 8.67098 4.36032 8.53033 4.21967C8.38968 4.07902 8.19891 4 8 4C7.80109 4 7.61032 4.07902 7.46967 4.21967C7.32902 4.36032 7.25 4.55109 7.25 4.75V7.25H4.75C4.55109 7.25 4.36032 7.32902 4.21967 7.46967C4.07902 7.61032 4 7.80109 4 8C4 8.19891 4.07902 8.38968 4.21967 8.53033C4.36032 8.67098 4.55109 8.75 4.75 8.75H7.25V11.25C7.25 11.4489 7.32902 11.6397 7.46967 11.7803C7.61032 11.921 7.80109 12 8 12C8.19891 12 8.38968 11.921 8.53033 11.7803C8.67098 11.6397 8.75 11.4489 8.75 11.25V8.75H11.25C11.4489 8.75 11.6397 8.67098 11.7803 8.53033C11.921 8.38968 12 8.19891 12 8C12 7.80109 11.921 7.61032 11.7803 7.46967C11.6397 7.32902 11.4489 7.25 11.25 7.25H8.75V4.75Z"
                  fill="white"
                />
              </svg>
            </button>
          </span>
        </td>
      </tr>
    </table>
  </div>
  <div class="submit-btn">
    <button (click)="postOrderSubmit()">Submit</button>
  </div>
</div>

<!-- Add Product Popup -->

<div class="popup" *ngIf="showProduct">
  <div class="popup-close" (click)="clostProduct()"></div>
  <div class="popup-container">
    <div class="title">
      <h3>Add Product</h3>
    </div>
    <input
      type="text"
      class="drop-down-product"
      placeholder="Select product"
      (click)="onSelectionChange()"
    />
    <div class="product-list" *ngIf="list">
      <p value="option1" *ngFor="let data of products">
        <input
          type="checkbox"
          style="margin-right: 12px"
          (change)="selectProduct($event)"
          [checked]="checked(data._id)"
          [value]="data._id"
        />{{ data.productTitle }}
      </p>
    </div>
    <div class="buttons">
      <button class="back-btn" (click)="clostProduct()">Back</button>
      <button class="add-btn" (click)="AddProductToServer()">Add</button>
    </div>
  </div>
</div>
